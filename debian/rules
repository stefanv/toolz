#!/usr/bin/make -f

#export DH_VERBOSE=1
export PYBUILD_NAME=toolz

export http_proxy=http://127.0.9.1:9
export https_proxy=http://127.0.9.1:9

PYVER = $(shell py3versions  -vd)
PY3VERS = $(shell py3versions -vr)


%:
	dh $@ --with python3,sphinxdoc --buildsystem=pybuild

override_dh_clean:
	rm -rf build doc/build toolz.egg-info
	dh_clean

override_dh_auto_build:
	dh_auto_build
	PYTHONPATH=. sphinx-build $(SPHINXOPTS) -N -bhtml doc/source build/html

override_dh_compress:
	dh_compress -X.py -X.html -X.pdf -X.css -X.jpg -X.txt -X.js -X.json -X.rtc

override_dh_sphinxdoc:
ifneq (,$(findstring -a,$(DH_INTERNAL_OPTIONS)))
	: # no documentation in -a -- surprised that sphinxdoc doesn't know that
else
	dh_sphinxdoc -ppython3-toolz-doc
endif

override_dh_installdocs:
	dh_installdocs -A AUTHORS.md README.rst
